<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Locations</title>
    <style>
      /* Base styles */
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background-color: transparent;
        overflow: hidden;
      }

      #menu {
        position: fixed;
        top: 50%;
        left: 20px;
        transform: translateY(-50%);
        background: #1e293b;
        color: white;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        width: 200px;
        padding: 15px;
        display: flex;
        flex-direction: column;
        align-items: center;
        z-index: 1000;
      }

      #menu h3 {
        margin: 0 0 10px;
      }

      #menu select {
        margin-bottom: 15px;
        width: 100%;
        padding: 8px;
        border-radius: 5px;
        border: none;
        outline: none;
        background: #64748b;
        color: white;
      }

      #menu button {
        padding: 10px 15px;
        background: #3b82f6;
        border: none;
        border-radius: 5px;
        color: white;
        cursor: pointer;
        transition: background 0.3s ease;
      }

      #menu button:hover {
        background: #2563eb;
      }

      #shelf {
        position: fixed;
        top: 0;
        right: 0;
        height: 100%;
        width: 300px;
        background: #1e293b;
        color: white;
        box-shadow: -2px 0 5px rgba(0, 0, 0, 0.2);
        overflow-y: auto;
        transition: transform 0.4s ease, opacity 0.4s ease;
        padding: 20px;
        z-index: 1000;
        transform: translateX(100%); /* Start off-screen */
        opacity: 0; /* Fully transparent */
      }

      #shelf.open {
        transform: translateX(0); /* Slide into view */
        opacity: 1; /* Fully visible */
      }

      #shelf h3 {
        margin: 0 0 15px;
      }

      #shelf ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      #shelf ul li {
        padding: 10px 15px;
        margin-bottom: 10px;
        background: #64748b;
        border-radius: 5px;
        cursor: pointer;
        transition: background 0.3s ease;
      }

      #shelf ul li:hover {
        background: #3b82f6;
      }

      .moveable {
        cursor: grab;
      }
    </style>
  </head>
  <body>
    <div id="menu" class="moveable">
      <h3>Job Selector</h3>
      <select id="jobSelect">
        <option value="" disabled selected>Select a job</option>
      </select>
      <button id="viewLocations">View Locations</button>
    </div>

    <div id="shelf">
      <h3 id="shelfTitle">Locations</h3>
      <ul id="locationList"></ul>
    </div>

    <script>
      // Embedded locations data
      const locations = {
        "Aerial Firefighter": [
        { "name": "Location 1", "x": 500, "y": 250 },
        { "name": "Location 2", "x": 1000, "y": 500 }
        ],
        "Airline Pilot": [
        { "name": "Airport Runway", "x": 1500, "y": 1000 },
        { "name": "Sky Location 1", "x": 2000, "y": 1200 }
        ],
        "Beach Cleaner": [
        { "name": "Beach Location 1", "x": 100, "y": 200 },
        { "name": "Beach Location 2", "x": 300, "y": 400 }
        ],
        "Business": [
        { "name": "La Vaca Loco", "x": 142.927383, "y": -1520.104736, "z": 29.836950 },
        { "name": "Mr. Spoke's Bike Rental", "x": -1106.429565, "y": -1695.158203, "z": 4.373420 },
        { "name": "Sandy Shores Liquor", "x": 1952.636353, "y": 3842.005371, "z": 32.178314 },
        { "name": "Vespucci Movie Masks", "x": -1337.976440, "y": -1276.094116, "z": 4.895197 },
        { "name": "Wenger Institute", "x": -368.79766845703, "y": -240.53649902344, "z": 36.080070495605 }
        ],
        "Trucking": [
        { "name": "Alamo View", "x": 721.09558105469, "y": 4176.1459960938, "z": 39.709201812744 },
        { "name": "Alta Construction Site", "x": 98.938095092773, "y": -386.93804931641, "z": 40.278854370117 },
        { "name": "Alturist Camp", "x": -1121.9615478516, "y": 4928.5854492188, "z": 217.75621032715 },
        { "name": "Auditorium", "x": 689.39520263672, "y": 613.05291748047, "z": 127.91116333008 },
        { "name": "Bayview", "x": -691.33880615234, "y": 5773.896484375, "z": 16.330947875977 },
        { "name": "Bristols Fuel Storage", "x": 544.26892089844, "y": -2731.8520507813, "z": 5.0561113357544 },
        { "name": "Christmas Present Factory", "x": -591.60833740234, "y": -97.845008850098, "z": 41.335216522217 },
        { "name": "Clucking Bell Farms", "x": 31.669704437256, "y": 6286.98828125, "z": 29.931455612183 },
        { "name": "Davis Mega Mall", "x": 101.41888427734, "y": -1824.4812011719, "z": 24.922037124634 },
        { "name": "Deep Quarry", "x": 2962.6967773438, "y": 2746.5168457031, "z": 42.082569122314 },
        { "name": "Del Perro Plaza", "x": -1524.2985839844, "y": -434.12319946289, "z": 34.442066192627 },
        { "name": "Dignity Village", "x": 1475.2137451172, "y": 6359.9340820313, "z": 22.341884613037 },
        { "name": "Elysian Island Waste Deposit", "x": 264.68194580078, "y": -3022.201171875, "z": 4.0160155296326 },
        { "name": "Filtering Plant", "x": 270.10818481445, "y": 2851.9851074219, "z": 42.625190734863 },
        { "name": "Fort Zancudo", "x": -2123.1623535156, "y": 3133.2165527344, "z": 32.810157775879 },
        { "name": "Furniture Store", "x": 2665.40625, "y": 3528.7941894531, "z": 51.238079071045 },
        { "name": "Grapeseed Farms", "x": 1912.9744873047, "y": 4940.7841796875, "z": 47.534248352051 },
        { "name": "Great Chaparral Farm", "x": -63.728096008301, "y": 1880.1964111328, "z": 196.02183532715 },
        { "name": "GSD Gas Pumping Station", "x": 588.97094726563, "y": 2904.5051269531, "z": 38.792572021484 },
        { "name": "GSD Mine", "x": 1025.0187988281, "y": 2909.7883300781, "z": 39.678581237793 },
        { "name": "Harmony Shopping Center", "x": 597.67004394531, "y": 2798.603515625, "z": 40.911960601807 },
        { "name": "House Construction Site", "x": 1376.887939, "y": -739.772034, "z": 66.232918 },
        { "name": "Jewelry Store", "x": -637.30340576172, "y": -241.26341247559, "z": 37.093109130859 },
        { "name": "Land Act Reservoir", "x": 1534.3098144531, "y": 834.60900878906, "z": 76.451934814453 },
        { "name": "Logging Camp", "x": -961.28234863281, "y": 4173.1274414063, "z": 134.37059020996 },
        { "name": "Logging Camp", "x": 353.16650390625, "y": 4449.4951171875, "z": 61.840869903564 },
        { "name": "Logging Camp", "x": -1218.2248535156, "y": 4457.634765625, "z": 29.526123046875 },
        { "name": "Logging Camp", "x": -618.11608886719, "y": 5841.0341796875, "z": 23.238647460938 },
        { "name": "LS Factory", "x": 233.826171875, "y": -2210.671875, "z": 6.796642780304 },
        { "name": "LS Foundry", "x": 1066.192871, "y": -1962.365356, "z": 29.014606 },
        { "name": "LSIA Shipments", "x": -1155.6400146484, "y": -2188.1518554688, "z": 12.195683479309 },
        { "name": "LSIA Warehouse", "x": -751.17303466797, "y": -2593.5288085938, "z": 12.828506469727 },
        { "name": "LS Marina", "x": -835.93780517578, "y": -1275.9228515625, "z": 4.0003213882446 },
        { "name": "McKenzie Export", "x": 2148.071533, "y": 4806.387207, "z": 39.202164 },
        { "name": "Military Workshop", "x": -1759.1031494141, "y": 3062.0981445313, "z": 31.82453536987299 },
        { "name": "Mineral Mine", "x": -604.17065429688, "y": 2103.09375, "z": 127.41593933105 },
        { "name": "Mount Gordo Airport", "x": 2273.4418945313, "y": 7002.625, "z": 21.018964767456 },
        { "name": "Pacific Ocean Airport", "x": 3008.455078125, "y": -716.60382080078, "z": 19.438777923584 },
        { "name": "Paleto Bay Airport", "x": -260.0876159668, "y": 6849.8837890625, "z": 10.766050338745 },
        { "name": "PB Construction Site", "x": 55.550399780273, "y": 6541.9790039063, "z": 30.63610458374 },
        { "name": "PB Factory", "x": -274.85046386719, "y": 6047.0283203125, "z": 30.606485366821 },
        { "name": "Police Evidence", "x": 462.12347412109, "y": -988.99255371094, "z": 24.914875030518 },
        { "name": "PostOp HQ", "x": -422.00680541992, "y": -2788.0261230469, "z": 6.0003867149353 },
        { "name": "PostOP Airport", "x": 997.18182373047, "y": -3415.9108886719, "z": 4.7015933990479 },
        { "name": "Quarry", "x": 2682.7861328125, "y": 2817.8293457031, "z": 39.449024200439 },
        { "name": "Raven Slaughterhouse", "x": 957.52685546875, "y": -2115.6027832031, "z": 29.551555633545 },
        { "name": "Recycling Center", "x": -345.93292236328, "y": -1562.4621582031, "z": 24.23023223877 },
        { "name": "Refinery", "x": 2809.6357421875, "y": 1551.9398193359, "z": 23.547212600708 },
        { "name": "Sandstone Collector", "x": 2171.3977050781, "y": 3507.1149902344, "z": 44.441234588623 },
        { "name": "San Chianski Airport", "x": 6352.2573242188, "y": 3552.1267089844, "z": 11.999998092651 },
        { "name": "Sandy Shores International Airport", "x": 527.73162841797, "y": 3830.0900878906, "z": 33.099807739258 },
        { "name": "Scrapyard", "x": 2397.7880859375, "y": 3112.3017578125, "z": 47.153259277344 },
        { "name": "Sorting Facility", "x": 1712.436035, "y": 3771.523926, "z": 32.388172 },
        { "name": "Sawmill", "x": -559.0625, "y": 5262.0502929688, "z": 70.099945068359 },
        { "name": "Textile City", "x": 385.45324707031, "y": -753.16790771484, "z": 28.293701171875 },
        { "name": "Tongva Valley", "x": -1508.1790771484, "y": 1490.1370849609, "z": 115.17268371582 },
        { "name": "Trucking Cargo Merchant: Erasers", "x": 837.52331542969, "y": -1932.3474121094, "z": 28.351470947266 },
        { "name": "Trucking Cargo Merchant: Erasers", "x": -1132.5842285156, "y": 2697.7170410156, "z": 18.800401687622 },
        { "name": "Trucking Cargo Merchant: Tools", "x": 834.75408935547, "y": -1988.6525878906, "z": 28.681140899658 },
        { "name": "Trucking Cargo Merchant: Tools", "x": -3164.8996582031, "y": 1122.8239746094, "z": 20.910572052002 },
        { "name": "Vehicle Parts", "x": -64.931816101074, "y": 6396.3369140625, "z": 30.490350723267 },
        { "name": "Vespucci Beach", "x": -1188.7947998047, "y": -1488.2370605469, "z": 3.3796648979187 },
        { "name": "Water Treatment Plant", "x": 156.2195892334, "y": -2409.0537109375, "z": 4.9996366500854 },
        { "name": "Wiwang", "x": -826.23345947266, "y": -760.06475830078, "z": 21.079223632813 },
        { "name": "Workshop", "x": 846.36944580078, "y": -2346.2158203125, "z": 29.333755493164 }
        ]
      };

        const jobSelect = document.getElementById("jobSelect");
        const viewLocationsButton = document.getElementById("viewLocations");
        const shelf = document.getElementById("shelf");
        const shelfTitle = document.getElementById("shelfTitle");
        const locationList = document.getElementById("locationList");

        // Populate job dropdown
        for (const job in locations) {
            const option = document.createElement("option");
            option.value = job;
            option.textContent = job;
            jobSelect.appendChild(option);
        }

        // Open the shelf with locations
        viewLocationsButton.addEventListener("click", () => {
            const selectedJob = jobSelect.value;
            if (!selectedJob) return alert("Please select a job!");

            // Populate shelf with locations
            shelfTitle.textContent = `${selectedJob} Locations`;
            locationList.innerHTML = ""; // Clear previous options

            locations[selectedJob].forEach(location => {
                const li = document.createElement("li");
                li.textContent = location.name;
                li.addEventListener("click", () => {
                    const { x, y } = location;
                    window.parent.postMessage({ type: "setWaypoint", x, y }, "*");
                    console.log(`Waypoint set to: X=${x}, Y=${y}`);
                    simulateF1KeyPress();
                });
                locationList.appendChild(li);
            });

            // Slide the shelf in and make it visible
            shelf.classList.add("open");
        });

        // Close the shelf by clicking anywhere outside
        document.addEventListener("click", (e) => {
            if (!shelf.contains(e.target) && !viewLocationsButton.contains(e.target)) {
                shelf.classList.remove("open");
            }
        });

        // Simulate F1 key press
        function simulateF1KeyPress() {
            const event = new KeyboardEvent("keydown", { key: "F1" });
            document.dispatchEvent(event);
        }

        // Make the menu movable
        const menu = document.getElementById("menu");
        let isDragging = false;
        let offsetX, offsetY;

        menu.addEventListener("mousedown", (e) => {
            isDragging = true;
            offsetX = e.clientX - menu.offsetLeft;
            offsetY = e.clientY - menu.offsetTop;
            menu.style.cursor = "grabbing";
        });

        document.addEventListener("mousemove", (e) => {
            if (isDragging) {
                menu.style.left = `${e.clientX - offsetX}px`;
                menu.style.top = `${e.clientY - offsetY}px`;
            }
        });

        document.addEventListener("mouseup", () => {
            isDragging = false;
            menu.style.cursor = "grab";
        });
    </script>
</body>
</html>
