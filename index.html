<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Locations</title>
</head>
<body>
    <div id="menu">
        <select id="jobSelect"></select>
        <select id="locationSelect"></select>
        <button id="setWaypointButton">Set Waypoint</button>
    </div>

    <script>
        // Embedded locations data
        const locations = {
            "Aerial Firefighter": [
          { "name": "Location 1", "x": 500, "y": 250 },
          { "name": "Location 2", "x": 1000, "y": 500 }
            ],
            "Airline Pilot": [
          { "name": "Airport Runway", "x": 1500, "y": 1000 },
          { "name": "Sky Location 1", "x": 2000, "y": 1200 }
            ],
            "Beach Cleaner": [
          { "name": "Beach Location 1", "x": 100, "y": 200 },
          { "name": "Beach Location 2", "x": 300, "y": 400 }
            ],
            "Business": [
          { "name": "Wenger Institute", "x": -368.79766845703, "y": -240.53649902344, "z": 36.080070495605 },
          { "name": "La Vaca Loco", "x": 142.927383, "y": -1520.104736, "z": 29.836950 },
          { "name": "Vespucci Movie Masks", "x": -1337.976440, "y": -1276.094116, "z": 4.895197 },
          { "name": "Mr. Spoke's Bike Rental", "x": -1106.429565, "y": -1695.158203, "z": 4.373420 },
          { "name": "Sandy Shores Liquor", "x": 1952.636353, "y": 3842.005371, "z": 32.178314 }
            ]
        };


        const jobSelect = document.getElementById("jobSelect");
        const locationSelect = document.getElementById("locationSelect");
        const setWaypointButton = document.getElementById("setWaypointButton");

        // Populate job dropdown
        for (const job in locations) {
            const option = document.createElement("option");
            option.value = job;
            option.textContent = job;
            jobSelect.appendChild(option);
        }

        // Update locations dropdown when job changes
        jobSelect.addEventListener("change", () => {
            const selectedJob = jobSelect.value;
            locationSelect.innerHTML = ""; // Clear previous options

            locations[selectedJob].forEach(location => {
                const option = document.createElement("option");
                option.value = JSON.stringify(location); // Store coordinates as a JSON string
                option.textContent = location.name;
                locationSelect.appendChild(option);
            });
        });

        // Set waypoint on button click
        setWaypointButton.addEventListener("click", () => {
            const selectedLocation = JSON.parse(locationSelect.value);
            if (selectedLocation) {
                const { x, y } = selectedLocation;
                // Send the waypoint to the parent window
                window.parent.postMessage({ type: "setWaypoint", x, y }, "*");
                console.log(`Waypoint set to: X=${x}, Y=${y}`);
            }
        });

        // Initialize the dropdowns
        jobSelect.dispatchEvent(new Event("change"));
    </script>
</body>
</html>
